"use strict";myApp.controller("siteController",["$scope","siteService","authenticateService","$cookies",function(e,t,n,i){function o(t){e.siteInformation.siteGet=t.data.data}function a(e){validateErr(e,function(){})}function c(){$("#myModal").modal("hide"),AlertMessage("1","Tạo website thành công"),e.getSite()}function r(e){validateErr(e,function(){AlertMessage("0",e.data.message)})}function s(){AlertMessage("1","Xoá website thành công"),e.getSite()}function u(e){validateErr(e,function(){AlertMessage("0",e.data.error)})}function d(t){$("#siteInfoModal").modal("hide"),AlertMessage("1",t.data.message),e.getSite()}function h(e){validateErr(e,function(){AlertMessage("0",e.data.error)})}e.currentTab=3,e.category=["Giáo dục","Tin tức","Thương mại điện tử","Mỹ phẩm và chăm sóc sắc đẹp","Thời trang","Đời sống gia đình","Video","Tài chính","Thực phẩm- nhà hàng","Game","Tìm việc","Sức khỏe","Xổ số","Âm nhạc","Bất động sản","Hẹn hò qua mạng","Du lịch","Phương tiện đi lại","Người làm marketing","Di động"],e.choosingCategory=[],e.chosen=[],e.tagAdded=function(t){e.chosen.push(t.text)},e.tagRemoved=function(t){e.chosen.remove(t.text)},e.siteInformation={siteGet:{},userInformation:{}},e.filterObject={url:"",name:""},n.getUserInformation().then(function(t){e.$apply(function(){e.siteInformation.userInformation=t}),i.put("userInfo",JSON.stringify(t))}).catch(function(e){}),e.getSite=function(){t.getSite(o,a)},e.createSite=function(){validateUsername("#usr")&&validateUrl("#domain")&&t.createSite({name:e.name,url:e.url,category:e.chosen.toString(),isActive:e.isActive,maxPhone:e.maxPhone},c,r)},e.current={name:"",url:"",category:"",isActive:"",maxPhone:""},e.clipboardScript="<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js'></script><script src='http://api.adfast.tech:8585/elpis.loader.js'></script><script>window.addEventListener('onload',function () {Elpis.Runner.start();});</script>",e.copyScript=function(e){var t=$("<input>");$("body").append(t),t.val(e).select(),document.execCommand("copy"),t.remove(),AlertMessage("1","Copy mã script thành công")},e.bindingSite=function(t){e.current=e.siteInformation.siteGet[t]},$("#siteInfoModal").on("hidden.bs.modal",function(){e.current={id:"",name:"",url:"",category:"",isActive:"",maxPhone:""}}),e.deleteSite=function(e){var n="<h4>Bạn có muốn xoá trang: <span style='color: darkred;font-weight: bold'>"+e.name+"</span> ?</h4>";bootbox.confirm(n,function(n){if(n){var i=e._id;t.deleteSite(i,s,u)}})},e.active=function(e,n){var i={_id:e,action:n};t.changeActiveStatus(i,d,h)},e.changeMaxPhone=function(e){var n={_id:e._id,maxPhone:e.maxPhone};t.changeMaxPhone(n,d,h)}}]);