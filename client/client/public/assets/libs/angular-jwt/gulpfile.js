var gulp=require("gulp"),karma=require("karma").server,concat=require("gulp-concat"),uglify=require("gulp-uglify"),rename=require("gulp-rename"),ngAnnotate=require("gulp-ng-annotate"),inject=require("gulp-inject-string");gulp.task("build",function(){gulp.src("src/angularJwt/**/*.js").pipe(concat("angular-jwt.js")).pipe(inject.wrap("(function() {\n\n\n","\n}());")).pipe(ngAnnotate()).pipe(gulp.dest("./dist/")).pipe(uglify()).pipe(rename("angular-jwt.min.js")).pipe(gulp.dest("./dist"))}),gulp.task("test-src",function(t){karma.start({configFile:__dirname+"/karma-src.conf.js",singleRun:!0},t)}),gulp.task("test-debug",function(t){karma.start({configFile:__dirname+"/karma-src.conf.js",singleRun:!1,autoWatch:!0},t)}),gulp.task("test-dist-concatenated",function(t){karma.start({configFile:__dirname+"/karma-dist-concatenated.conf.js",singleRun:!0},t)}),gulp.task("test-dist-minified",function(t){karma.start({configFile:__dirname+"/karma-dist-minified.conf.js",singleRun:!0},t)}),gulp.task("default",["test-src","build"]),gulp.task("dist",["test-dist-minified","test-dist-concatenated"]);