function $StateProvider(e,r){function t(e){return 0===e.indexOf(".")||0===e.indexOf("^")}function n(e,r){if(e){var a=isString(e),i=a?e:e.name,o=t(i);if(o){if(!r)throw new Error("No reference point given for path '"+i+"'");r=n(r);for(var s=i.split("."),l=0,u=s.length,c=r;l<u;l++)if(""!==s[l]||0!==l){if("^"!==s[l])break;if(!c.parent)throw new Error("Path '"+i+"' not valid for state '"+r.name+"'");c=c.parent}else c=r;s=s.slice(l).join("."),i=c.name+(c.name&&s?".":"")+s}var f=p[i];return!f||!a&&(a||f!==e&&f.self!==e)?void 0:f}}function a(e,r){h[e]||(h[e]=[]),h[e].push(r)}function i(e){for(var r=h[e]||[];r.length;)o(r.shift())}function o(r){r=inherit(r,{self:r,resolve:r.resolve||{},toString:function(){return this.name}});var t=r.name;if(!isString(t)||t.indexOf("@")>=0)throw new Error("State must have a valid name");if(p.hasOwnProperty(t))throw new Error("State '"+t+"' is already defined");var n=t.indexOf(".")!==-1?t.substring(0,t.lastIndexOf(".")):isString(r.parent)?r.parent:isObject(r.parent)&&isString(r.parent.name)?r.parent.name:"";if(n&&!p[n])return a(n,r.self);for(var o in g)isFunction(g[o])&&(r[o]=g[o](r,g.$delegates[o]));return p[t]=r,!r[m]&&r.url&&e.when(r.url,["$match","$stateParams",function(e,t){d.$current.navigable==r&&equalForKeys(e,t)||d.transitionTo(r,e,{inherit:!0,location:!1})}]),i(t),r}function s(e){return e.indexOf("*")>-1}function l(e){for(var r=e.split("."),t=d.$current.name.split("."),n=0,a=r.length;n<a;n++)"*"===r[n]&&(t[n]="*");return"**"===r[0]&&(t=t.slice(indexOf(t,r[1])),t.unshift("**")),"**"===r[r.length-1]&&(t.splice(indexOf(t,r[r.length-2])+1,Number.MAX_VALUE),t.push("**")),r.length==t.length&&t.join("")===r.join("")}function u(e,r){return isString(e)&&!isDefined(r)?g[e]:isFunction(r)&&isString(e)?(g[e]&&!g.$delegates[e]&&(g.$delegates[e]=g[e]),g[e]=r,this):this}function c(e,r){return isObject(e)?r=e:r.name=e,o(r),this}function f(e,r,t,a,i,o,u,c,f){function h(t,n,a,i){var o=e.$broadcast("$stateNotFound",t,n,a);if(o.defaultPrevented)return u.update(),P;if(!o.retry)return null;if(i.$retry)return u.update(),E;var s=d.transition=r.when(o.retry);return s.then(function(){return s!==d.transition?(e.$broadcast("$stateChangeCancel",t.to,t.toParams,n,a),w):(t.options.$retry=!0,d.transitionTo(t.to,t.toParams,t.options))},function(){return P}),u.update(),s}function g(e,n,o,s,l,u){function c(){var n=[];return forEach(e.views,function(r,o){var s=r.resolve&&r.resolve!==e.resolve?r.resolve:{};s.$template=[function(){return t.load(o,{view:r,locals:l.globals,params:f,notify:u.notify})||""}],n.push(i.resolve(s,l.globals,l.resolve,e).then(function(t){if(isFunction(r.controllerProvider)||isArray(r.controllerProvider)){var n=angular.extend({},s,l.globals);t.$$controller=a.invoke(r.controllerProvider,null,n)}else t.$$controller=r.controller;t.$$state=e,t.$$controllerAs=r.controllerAs,t.$$resolveAs=r.resolveAs,l[o]=t}))}),r.all(n).then(function(){return l.globals})}var f=o?n:filterByKeys(e.params.$$keys(),n),v={$stateParams:f};l.resolve=i.resolve(e.resolve,v,l.resolve,e);var $=[l.resolve.then(function(e){l.globals=e})];return s&&$.push(s),r.all($).then(c).then(function(e){return l})}var b=new Error("transition superseded"),w=silenceUncaughtInPromise(r.reject(b)),y=silenceUncaughtInPromise(r.reject(new Error("transition prevented"))),P=silenceUncaughtInPromise(r.reject(new Error("transition aborted"))),E=silenceUncaughtInPromise(r.reject(new Error("transition failed")));return $.locals={resolve:null,globals:{$stateParams:{}}},d={params:{},current:$.self,$current:$,transition:null},d.reload=function(e){return d.transitionTo(d.current,o,{reload:e||!0,inherit:!1,notify:!0})},d.go=function(e,r,t){return d.transitionTo(e,r,extend({inherit:!0,relative:d.$current},t))},d.transitionTo=function(t,i,s){i=i||{},s=extend({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},s||{});var l,c=d.$current,f=d.params,p=c.path,P=n(t,s.relative),S=i["#"];if(!isDefined(P)){var j={to:t,toParams:i,options:s},x=h(j,c.self,f,s);if(x)return x;if(t=j.to,i=j.toParams,s=j.options,P=n(t,s.relative),!isDefined(P)){if(!s.relative)throw new Error("No such state '"+t+"'");throw new Error("Could not resolve '"+t+"' from state '"+s.relative+"'")}}if(P[m])throw new Error("Cannot transition to abstract state '"+t+"'");if(s.inherit&&(i=inheritParams(o,i||{},d.$current,P)),!P.params.$$validates(i))return E;i=P.params.$$values(i),t=P;var C=t.path,O=0,k=C[O],F=$.locals,A=[];if(s.reload){if(isString(s.reload)||isObject(s.reload)){if(isObject(s.reload)&&!s.reload.name)throw new Error("Invalid reload state object");var D=s.reload===!0?p[0]:n(s.reload);if(s.reload&&!D)throw new Error("No such reload state '"+(isString(s.reload)?s.reload:s.reload.name)+"'");for(;k&&k===p[O]&&k!==D;)F=A[O]=k.locals,O++,k=C[O]}}else for(;k&&k===p[O]&&k.ownParams.$$equals(i,f);)F=A[O]=k.locals,O++,k=C[O];if(v(t,i,c,f,F,s))return S&&(i["#"]=S),d.params=i,copy(d.params,o),copy(filterByKeys(t.params.$$keys(),o),t.locals.globals.$stateParams),s.location&&t.navigable&&t.navigable.url&&(u.push(t.navigable.url,i,{$$avoidResync:!0,replace:"replace"===s.location}),u.update(!0)),d.transition=null,r.when(d.current);if(i=filterByKeys(t.params.$$keys(),i||{}),S&&(i["#"]=S),s.notify&&e.$broadcast("$stateChangeStart",t.self,i,c.self,f,s).defaultPrevented)return e.$broadcast("$stateChangeCancel",t.self,i,c.self,f),null==d.transition&&u.update(),y;for(var U=r.when(F),K=O;K<C.length;K++,k=C[K])F=A[K]=inherit(F),U=g(k,i,k===t,U,F,s);var M=d.transition=U.then(function(){var r,n,l;if(d.transition!==M)return e.$broadcast("$stateChangeCancel",t.self,i,c.self,f),w;for(r=p.length-1;r>=O;r--)l=p[r],l.self.onExit&&a.invoke(l.self.onExit,l.self,l.locals.globals),l.locals=null;for(r=O;r<C.length;r++)n=C[r],n.locals=A[r],n.self.onEnter&&a.invoke(n.self.onEnter,n.self,n.locals.globals);return d.transition!==M?(e.$broadcast("$stateChangeCancel",t.self,i,c.self,f),w):(d.$current=t,d.current=t.self,d.params=i,copy(d.params,o),d.transition=null,s.location&&t.navigable&&u.push(t.navigable.url,t.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===s.location}),s.notify&&e.$broadcast("$stateChangeSuccess",t.self,i,c.self,f),u.update(!0),d.current)}).then(null,function(n){return n===b?w:d.transition!==M?(e.$broadcast("$stateChangeCancel",t.self,i,c.self,f),w):(d.transition=null,l=e.$broadcast("$stateChangeError",t.self,i,c.self,f,n),l.defaultPrevented||u.update(),r.reject(n))});return M},d.is=function(e,r,t){t=extend({relative:d.$current},t||{});var a=n(e,t.relative);if(isDefined(a))return d.$current===a&&(!r||equalForKeys(a.params.$$values(r),o))},d.includes=function(e,r,t){if(t=extend({relative:d.$current},t||{}),isString(e)&&s(e)){if(!l(e))return!1;e=d.$current.name}var a=n(e,t.relative);if(isDefined(a)){if(!isDefined(d.$current.includes[a.name]))return!1;if(!r)return!0;for(var i=objectKeys(r),u=0;u<i.length;u++){var c=i[u],f=a.params[c];if(f&&!f.type.equals(o[c],r[c]))return!1}return!0}},d.href=function(e,r,t){t=extend({lossy:!0,inherit:!0,absolute:!1,relative:d.$current},t||{});var a=n(e,t.relative);if(!isDefined(a))return null;t.inherit&&(r=inheritParams(o,r||{},d.$current,a));var i=a&&t.lossy?a.navigable:a;return i&&void 0!==i.url&&null!==i.url?u.href(i.url,filterByKeys(a.params.$$keys().concat("#"),r||{}),{absolute:t.absolute}):null},d.get=function(e,r){if(0===arguments.length)return map(objectKeys(p),function(e){return p[e].self});var t=n(e,r||d.$current);return t&&t.self?t.self:null},d}function v(e,r,t,n,a,i){function o(e,r,t){function n(r){return"search"!=e.params[r].location}var a=e.params.$$keys().filter(n),i=pick.apply({},[e.params].concat(a)),o=new $$UMFP.ParamSet(i);return o.$$equals(r,t)}if(!i.reload&&e===t&&(a===t.locals||e.self.reloadOnSearch===!1&&o(t,n,r)))return!0}var $,d,p={},h={},m="abstract",g={parent:function(e){if(isDefined(e.parent)&&e.parent)return n(e.parent);var r=/^(.+)\.[^.]+$/.exec(e.name);return r?n(r[1]):$},data:function(e){return e.parent&&e.parent.data&&(e.data=e.self.data=inherit(e.parent.data,e.data)),e.data},url:function(e){var t=e.url,n={params:e.params||{}};if(isString(t))return"^"==t.charAt(0)?r.compile(t.substring(1),n):(e.parent.navigable||$).url.concat(t,n);if(!t||r.isMatcher(t))return t;throw new Error("Invalid url '"+t+"' in state '"+e+"'")},navigable:function(e){return e.url?e:e.parent?e.parent.navigable:null},ownParams:function(e){var r=e.url&&e.url.params||new $$UMFP.ParamSet;return forEach(e.params||{},function(e,t){r[t]||(r[t]=new $$UMFP.Param(t,null,e,"config"))}),r},params:function(e){var r=pick(e.ownParams,e.ownParams.$$keys());return e.parent&&e.parent.params?extend(e.parent.params.$$new(),r):new $$UMFP.ParamSet},views:function(e){var r={};return forEach(isDefined(e.views)?e.views:{"":e},function(t,n){n.indexOf("@")<0&&(n+="@"+e.parent.name),t.resolveAs=t.resolveAs||e.resolveAs||"$resolve",r[n]=t}),r},path:function(e){return e.parent?e.parent.path.concat(e):[]},includes:function(e){var r=e.parent?extend({},e.parent.includes):{};return r[e.name]=!0,r},$delegates:{}};$=o({name:"",url:"^",views:null,abstract:!0}),$.navigable=null,this.decorator=u,this.state=c,this.$get=f,f.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}$StateProvider.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],angular.module("ui.router.state").factory("$stateParams",function(){return{}}).constant("$state.runtime",{autoinject:!0}).provider("$state",$StateProvider).run(["$injector",function(e){e.get("$state.runtime").autoinject&&e.get("$state")}]);