function baseArity(r,n){return 2==n?function(n,t){return r.apply(void 0,arguments)}:function(n){return r.apply(void 0,arguments)}}function baseAry(r,n){return 2==n?function(n,t){return r(n,t)}:function(n){return r(n)}}function cloneArray(r){for(var n=r?r.length:0,t=Array(n);n--;)t[n]=r[n];return t}function createCloner(r){return function(n){return r({},n)}}function flatSpread(r,n){return function(){for(var t=arguments.length,e=t-1,a=Array(t);t--;)a[t]=arguments[t];var i=a[n],u=a.slice(0,n);return i&&push.apply(u,i),n!=e&&push.apply(u,a.slice(n+1)),r.apply(this,u)}}function wrapImmutable(r,n){return function(){var t=arguments.length;if(t){for(var e=Array(t);t--;)e[t]=arguments[t];var a=e[0]=n.apply(void 0,e);return r.apply(void 0,e),a}}}function baseConvert(r,n,t,e){function a(r,n){if(d.cap){var t=mapping.iterateeRearg[r];if(t)return y(n,t);var e=!s&&mapping.iterateeAry[r];if(e)return l(n,e)}return n}function i(r,n,t){return b||d.curry&&t>1?O(n,t):n}function u(r,n,t){if(d.fixed&&(A||!mapping.skipFixed[r])){var e=mapping.methodSpread[r],a=e&&e.start;return void 0===a?R(n,t):flatSpread(n,a)}return n}function o(r,n,t){return d.rearg&&t>1&&(x||!mapping.skipRearg[r])?M(n,mapping.methodRearg[r]||mapping.aryRearg[t]):n}function p(r,n){n=q(n);for(var t=-1,e=n.length,a=e-1,i=w(Object(r)),u=i;null!=u&&++t<e;){var o=n[t],p=u[o];null!=p&&(u[n[t]]=w(t==a?p:Object(p))),u=u[o]}return i}function c(r){return z.runInContext.convert(r)(void 0)}function f(r,n){var t=mapping.aliasToReal[r]||r,a=mapping.remap[t]||t,i=e;return function(r){var e=s?C:k,u=s?C[a]:n,o=j(j({},i),r);return baseConvert(e,t,u,o)}}function l(r,n){return g(r,function(r){return"function"==typeof r?baseAry(r,n):r})}function y(r,n){return g(r,function(r){var t=n.length;return baseArity(M(baseAry(r,t),n),t)})}function g(r,n){return function(){var t=arguments.length;if(!t)return r();for(var e=Array(t);t--;)e[t]=arguments[t];var a=d.rearg?0:t-1;return e[a]=n(e[a]),r.apply(void 0,e)}}function v(r,n){var t,e=mapping.aliasToReal[r]||r,c=n,l=_[e];return l?c=l(n):d.immutable&&(mapping.mutate.array[e]?c=wrapImmutable(n,cloneArray):mapping.mutate.object[e]?c=wrapImmutable(n,createCloner(n)):mapping.mutate.set[e]&&(c=wrapImmutable(n,p))),E(H,function(r){return E(mapping.aryMethod[r],function(n){if(e==n){var p=mapping.methodSpread[e],f=p&&p.afterRearg;return t=f?u(e,o(e,c,r),r):o(e,u(e,c,r),r),t=a(e,t),t=i(e,t,r),!1}}),!t}),t||(t=c),t==n&&(t=b?O(t,1):function(){return n.apply(this,arguments)}),t.convert=f(e,n),mapping.placeholder[e]&&(m=!0,t.placeholder=n.placeholder=I),t}var m,s="function"==typeof n,h=n===Object(n);if(h&&(e=t,t=n,n=void 0),null==t)throw new TypeError;e||(e={});var d={cap:!("cap"in e)||e.cap,curry:!("curry"in e)||e.curry,fixed:!("fixed"in e)||e.fixed,immutable:!("immutable"in e)||e.immutable,rearg:!("rearg"in e)||e.rearg},b="curry"in e&&e.curry,A="fixed"in e&&e.fixed,x="rearg"in e&&e.rearg,I=s?t:fallbackHolder,C=s?t.runInContext():void 0,k=s?t:{ary:r.ary,assign:r.assign,clone:r.clone,curry:r.curry,forEach:r.forEach,isArray:r.isArray,isFunction:r.isFunction,iteratee:r.iteratee,keys:r.keys,rearg:r.rearg,toInteger:r.toInteger,toPath:r.toPath},R=k.ary,j=k.assign,w=k.clone,O=k.curry,E=k.forEach,F=k.isArray,S=k.isFunction,T=k.keys,M=k.rearg,P=k.toInteger,q=k.toPath,H=T(mapping.aryMethod),_={castArray:function(r){return function(){var n=arguments[0];return F(n)?r(cloneArray(n)):r.apply(void 0,arguments)}},iteratee:function(r){return function(){var n=arguments[0],t=arguments[1],e=r(n,t),a=e.length;return d.cap&&"number"==typeof t?(t=t>2?t-2:1,a&&a<=t?e:baseAry(e,t)):e}},mixin:function(r){return function(n){var t=this;if(!S(t))return r(t,Object(n));var e=[];return E(T(n),function(r){S(n[r])&&e.push([r,t.prototype[r]])}),r(t,Object(n)),E(e,function(r){var n=r[1];S(n)?t.prototype[r[0]]=n:delete t.prototype[r[0]]}),t}},nthArg:function(r){return function(n){var t=n<0?1:P(n)+1;return O(r(n),t)}},rearg:function(r){return function(n,t){var e=t?t.length:0;return O(r(n,t),e)}},runInContext:function(n){return function(t){return baseConvert(r,n(t),e)}}};if(!h)return v(n,t);var z=t,B=[];return E(H,function(r){E(mapping.aryMethod[r],function(r){var n=z[mapping.remap[r]||r];n&&B.push([r,v(r,n)])})}),E(T(z),function(r){var n=z[r];if("function"==typeof n){for(var t=B.length;t--;)if(B[t][0]==r)return;n.convert=f(r,n),B.push([r,n])}}),E(B,function(r){z[r[0]]=r[1]}),z.convert=c,m&&(z.placeholder=I),E(T(z),function(r){E(mapping.realToAlias[r]||[],function(n){z[n]=z[r]})}),z}var mapping=require("./_mapping"),fallbackHolder=require("./placeholder"),push=Array.prototype.push;module.exports=baseConvert;