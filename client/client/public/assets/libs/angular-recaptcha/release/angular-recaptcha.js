!function(e){"use strict";e.module("vcRecaptcha",[])}(angular),function(e){"use strict";function t(){throw new Error('You need to set the "key" attribute to your public reCaptcha key. If you don\'t have a key, please get one from https://www.google.com/recaptcha/admin/create')}var n=e.module("vcRecaptcha");n.provider("vcRecaptchaService",function(){var n=this,c={};n.onLoadFunctionName="vcRecaptchaApiLoaded",n.setDefaults=function(t){e.copy(t,c)},n.setSiteKey=function(e){c.key=e},n.setTheme=function(e){c.theme=e},n.setStoken=function(e){c.stoken=e},n.setSize=function(e){c.size=e},n.setType=function(e){c.type=e},n.setLang=function(e){c.lang=e},n.setOnLoadFunctionName=function(e){n.onLoadFunctionName=e},n.$get=["$rootScope","$window","$q",function(o,a,r){function i(){return u?r.when(u):d}function s(){if(!u)throw new Error("reCaptcha has not been loaded yet.")}var u,l=r.defer(),d=l.promise,p={};a.vcRecaptchaApiLoadedCallback=a.vcRecaptchaApiLoadedCallback||[];var f=function(){u=a.grecaptcha,l.resolve(u)};return a.vcRecaptchaApiLoadedCallback.push(f),a[n.onLoadFunctionName]=function(){a.vcRecaptchaApiLoadedCallback.forEach(function(e){e()})},e.isDefined(a.grecaptcha)&&f(),{create:function(e,n){return n.sitekey=n.key||c.key,n.theme=n.theme||c.theme,n.stoken=n.stoken||c.stoken,n.size=n.size||c.size,n.type=n.type||c.type,n.hl=n.lang||c.lang,n.sitekey&&40===n.sitekey.length||t(),i().then(function(t){var c=t.render(e,n);return p[c]=e,c})},reload:function(e){s(),u.reset(e),o.$broadcast("reCaptchaReset",e)},useLang:function(e,t){var n=p[e];if(!n)throw new Error("reCaptcha Widget ID not exists",e);var c=n.querySelector("iframe");if(!t)return c&&c.src&&/[?&]hl=\w+/.test(c.src)?c.src.replace(/.+[?&]hl=(\w+)([^\w].+)?/,"$1"):null;if(c&&c.src){var o=c.src;/[?&]hl=/.test(o)?o=o.replace(/([?&]hl=)\w+/,"$1"+t):o+=(o.indexOf("?")===-1?"?":"&")+"hl="+t,c.src=o}},getResponse:function(e){return s(),u.getResponse(e)},getInstance:function(e){return p[e]},destroy:function(e){delete p[e]}}}]})}(angular),function(e){"use strict";var t=e.module("vcRecaptcha");t.directive("vcRecaptcha",["$document","$timeout","vcRecaptchaService",function(t,n,c){return{restrict:"A",require:"?^^form",scope:{response:"=?ngModel",key:"=?",stoken:"=?",theme:"=?",size:"=?",type:"=?",lang:"=?",tabindex:"=?",required:"=?",onCreate:"&",onSuccess:"&",onExpire:"&"},link:function(o,a,r,i){function s(){i&&i.$setValidity("recaptcha",null),d()}function u(){n(function(){o.response="",l(),o.onExpire({widgetId:o.widgetId})})}function l(){i&&i.$setValidity("recaptcha",o.required===!1?null:Boolean(o.response))}function d(){c.destroy(o.widgetId),e.element(t[0].querySelectorAll(".pls-container")).parent().remove()}o.widgetId=null,i&&e.isDefined(r.required)&&o.$watch("required",l);var p=o.$watch("key",function(t){var i=function(e){n(function(){o.response=e,l(),o.onSuccess({response:e,widgetId:o.widgetId})})};c.create(a[0],{callback:i,key:t,stoken:o.stoken||r.stoken||null,theme:o.theme||r.theme||null,type:o.type||r.type||null,lang:o.lang||r.lang||null,tabindex:o.tabindex||r.tabindex||null,size:o.size||r.size||null,"expired-callback":u}).then(function(t){l(),o.widgetId=t,o.onCreate({widgetId:t}),o.$on("$destroy",s),o.$on("reCaptchaReset",function(n,c){(e.isUndefined(c)||t===c)&&(o.response="",l())})}),p()})}}}])}(angular);